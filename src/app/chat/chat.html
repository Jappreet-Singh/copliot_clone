<div class="container-fluid vh-100 d-flex flex-column">
  <!-- Navbar -->
  <nav class="navbar navbar-light bg-light shadow-sm px-3">
    <a class="navbar-brand fw-bold" href="#">AI Chatbot</a>
    <button class="btn btn-outline-primary btn-sm">Settings</button>
  </nav>

  <div class="row flex-grow-1">
    <!-- Sidebar -->
    <!-- <div class="col-md-3 col-lg-2 bg-white border-end d-none d-md-flex flex-column p-3">
      <h6 class="text-muted mb-3">Chat History</h6>
      <ul class="list-group flex-grow-1 overflow-auto">
        <li class="list-group-item small">ðŸ’¬ Project Plan</li>
        <li class="list-group-item small">ðŸ“Š Code Review</li>
        <li class="list-group-item small">ðŸ§  Brainstorm Ideas</li>
      </ul>
      <button class="btn btn-primary mt-3">+ New Chat</button>
    </div> -->

    <!-- Chat Area -->
    <div class="col-md-9 col-lg-12 d-flex flex-column p-0">
      <div id="chat-container" class="flex-grow-1 overflow-auto p-3">
        <!-- Welcome message -->
        <!-- <div class="message ai-message">
          <div class="message-content bg-light border">
            Hi there! I'm your AI Copilot. How can I assist you today?
          </div>
        </div> -->

        @for(message of conversation;track message) {
          @if(message.role=='user') {
        <div class="message user-message">
          <div class="message-content bg-primary text-white">
            {{ message.content }}
          </div>
        </div>
      }@else{
        <div class="message ai-message">
          <div class="message-content bg-light border">
            {{ message.content }}
          </div>
        </div>
      }  
      }
      </div>
<!--  file upload area-->
      <div class="bg-white border-top px-5 pt-3">
  <div class="d-flex align-items-center gap-2">
    <input
      type="file"
      accept=".pdf,.txt"
      (change)="onFileSelected($event)"
      class="form-control form-control-sm"
    />

    <button
      class="btn btn-outline-primary btn-sm"
      [disabled]="!selectedFile || uploading"
      (click)="uploadFile()">
      {{ uploading ? 'Summarizing...' : 'Summarize file' }}
    </button>
  </div>

  <small class="text-muted d-block mt-1">
    Upload PDF or TXT to get an instant summary
  </small>
</div>

      <!-- Input area -->
      <div class="chat-input bg-white border-top p-5">
        <div class="input-group">
          <input
            type="text"
            class="form-control"
            placeholder="Type your message..."
            [(ngModel)]="userMessage"
            (keyup.enter)="sendMessage()"
          />

          <button class="btn btn-primary" (click)="sendMessage()">Send</button>
        </div>
      </div>
    </div>
  </div>
</div>
